/**
 * Add odata select to a CQN object.
 *
 * @param {string} select - odata select string
 * @param {string} key - primary key
 * @private
 */
const selectToCQN = (select, key) => {
  const elements = new Set()
  const columns = select.split(',')
  if (columns.indexOf('*') !== -1) {
    return []
  }

  for (const col of columns) {
    elements.add(col)
  }

  // add key, as odata-v4 always expects the key here.
  if (key && !elements.has(key)) {
    elements.add(key)
  }

  return Array.from(elements)
}

module.exports = selectToCQN
