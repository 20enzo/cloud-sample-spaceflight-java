OData V4.0 Server Library
=========================

## Table of Contents

- [Overview](#overview)
- [Installation](#installation)
- [Usage](#usage)
- [Releases and Milestones](#releases-and-milestones)

# Overview

With the OData server library OData V4.0 services can be implemented based on the [OASIS OData standard](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=odata).
The library can be directly used to build OData services and is also part of the SAP Fiori programming model as well the SAP Cloud Platform programming model, where the data model can be defined in CDS (Core data services) and the OData service be generated out of the model.

The library leaves the freedom to build OData services with any db or persistence layer. It is also possible
to create services, that are calling external REST/OData services and mix up the data with your application data.

The library is modular and consists of the following main components:

* EntityDataModel - Define your EDM in JSON format. Our provider creates the
  EDM out of your model and caches EDM model elements
* Handler Dispatcher - Maps requests to handler functions for CRUD operations
* URI parsers - Parse the request URI including the OData system query options
  (like $format, $select, $expand,...) and validates each URI segment against
  the EDM model and the OData ABNF
* Serializers and Deserializers for the request and response payload.
  The deserializers validate the request payload and support type mapping between
  OData EDM types and JavaScript Types
* Automatic OData Reponse generation based on provided data
* ServiceFactory to create the OData service along with the CRUD handler registration
* Conditional request handling for optimistic concurrency control via ETAGs
* Batch handling - Batch request parsing, dispatching to single batch requests,
  Content-ID referencing and batch response generation
* Flexible API to support all backends - The service developer has the free
  choice of his backend system (e.g., databases, frameworks, calling additional
  external OData services).

# Installation
```npm install @sap/odata-v4```

# Usage

```javascript
const odata = require('@sap/odata-v4');
// Load your edm model.
const edmModel = require('./<your_edm_model>.json');

// Create the service
const service = odata.ServiceFactory.createService(edmModel)

    // Register the request handler for CRUD operations
    .on('create', function create(request, response, next){...})
    .on('update', function update(request, response, next){...})
    .on('delete', function delete(request, response, next){...})
    .on('read', function read(request, response, next){...})

//Create the server
const port = 9000;
const server = http.createServer((req, res) => service.process(req, res))
    .listen(port,
        () => console.log(`Server listens on port ${port} - Service URL: http://localhost:${port}/serviceroot.svc/`)
    );
```

## Releases and Milestones

[Changelog](./CHANGELOG.md)
