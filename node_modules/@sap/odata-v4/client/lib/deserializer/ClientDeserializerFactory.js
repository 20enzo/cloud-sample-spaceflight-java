const V2ResourceJsonDeserializer = require('./../../lib/deserializer/V2ResourceJsonDeserializer');
const RepresentationKind = require('./../../../lib/format/RepresentationKind');

class ClientDeserializerFactory {

    static createJsonV2Deserializer(edmType, representationKind, rawBody) {

        switch (representationKind) {
            case RepresentationKind.Kinds.ENTITY_COLLECTION:
                return () => {
                    return new V2ResourceJsonDeserializer()
                        .deserializeEntityCollection(edmType, rawBody);
                };

            case RepresentationKind.Kinds.ENTITY:
                return () => {
                    return new V2ResourceJsonDeserializer()
                        .deserializeEntity(edmType, rawBody);
                };

            case RepresentationKind.Kinds.PRIMITIVE:
                return () => {
                    return new V2ResourceJsonDeserializer()
                        .deserializePrimitiveProperty(edmType, rawBody);
                };

            case RepresentationKind.Kinds.COMPLEX:
                return () => {
                    return new V2ResourceJsonDeserializer()
                        .deserializeComplexProperty(edmType, rawBody);
                };

            case RepresentationKind.Kinds.NO_CONTENT:
                return () => {
                    return null;
                };

            default:
                return () => {
                    throw new Error(`Deserialize representation kind '${representationKind}' is not supported`);
                };
        }


    }

}

module.exports = ClientDeserializerFactory;
