const V2ResourceJsonSerializer = require('./../../lib/serializer/V2ResourceJsonSerializer');
const RepresentationKind = require('./../../../lib/format/RepresentationKind');

class ClientDeserializerFactory {

    static createJsonV2Serializer(edmArtifact, representationKind, rawBody) {

        switch (representationKind) {

            case RepresentationKind.Kinds.ENTITY:
                return () => {
                    return new V2ResourceJsonSerializer()
                        .serializeEntity(edmArtifact, rawBody);
                };

            case RepresentationKind.Kinds.PRIMITIVE:
                return () => {
                    return new V2ResourceJsonSerializer()
                        .serializePrimitive(edmArtifact, rawBody);
                };

            case RepresentationKind.Kinds.COMPLEX:
                return () => {
                    return new V2ResourceJsonSerializer()
                        .serializeComplex(edmArtifact, rawBody);
                };

            default:
                return () => {
                    throw new Error(`Serialize representation kind '${representationKind}' is not supported`);
                };
        }

    }

}

module.exports = ClientDeserializerFactory;
