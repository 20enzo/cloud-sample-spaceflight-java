# @sap/cds

The API package for the different parts of CDS.
It provides access to CDS compiler, both on command line and programmatically.

## Building Models on Command Line
Given an application with structure
```
db/
  data-model.cds
srv/
  my-service.cds
```
you can execute `cds build` to build the models.

<!-- See the [docs](https://<TODO ADD LINK>/get-started/in-a-nutshell) for more. -->

## Building Models Programmatically
```bash
cds -e "cds.load('db') .then (cds.compile.to.hana)"
cds -e "cds.load('srv').then (cds.compile.to.edmx)"
```

See the [docs](https://help.sap.com/viewer/DRAFT/65de2977205c403bbc107264b8eccf4b/Cloud/en-US/a131984aefe94ff884e6b6819ee76bd9.html) for more.


## Connecting to a Database
Add an optional driver, which is currently located at GitHub:
```json
{
  "dependencies": {
    "@sap/cds": "*",
    "@sap/cds-sqlite": "*",
    "@sap/cds-hana": "*"
  }
}
```

The connect function has the parameter `connect(<driver>, <connectOptions>, [<poolOptions>])`

### Hana
In the background the [hdb](https://www.npmjs.com/package/hdb) driver package is used.

Its connect options can be used 1:1 like:
```javascript
const cds = require('@sap/cds')

cds.connect('hana', {
  host: 'hostname',
  port: 30015,
  user: 'user',
  password: 'secret'
})
```

### SQLite
In the background the [sqlite3](https://www.npmjs.com/package/sqlite3) driver package is used.

Connecting to an in memory database:
```javascript
const cds = require('@sap/cds')

cds.connect('sqlite', {
  host: ':memory:'
})
```

Or to a file:
```javascript
const cds = require('@sap/cds')

cds.connect('sqlite', {
  host: './db/sqlite3.db'
}, {
  min: 1,
  max: 10
})
```

## OData Service
Currently the odata service depends on the express.Router. It is included in the package.
The service can be served with express.

```javascript
const cds = require('@sap/cds')
const express = require('express')

const port = 8080

app = express()
app.use('/', cds.service('./service'))

app.listen(port, () => {
  console.log(`server listening at port ${port}`)
})
```
